/*
 Highcharts JS v4.0.3 (2014-07-03)
  csj 2015-01-05 修改 src 1092 行

 (c) 2009-2013 Torstein Hønsi

 License: www.highcharts.com/license
*/
(function(n){var o=Math.PI,deg2rad=(o/180),sin=Math.sin,cos=Math.cos,round=Math.round;function perspective(b,c,d,e){d*=deg2rad;c*=deg2rad;var f=[],xe,ye,ze;d*=-1;xe=e.x;ye=e.y;ze=(e.z===0?0.0001:e.z)*(e.vd||25);ze=Math.max(500,ze);var g=sin(d),c1=cos(d),s2=sin(c),c2=cos(c);var x,y,z,p;n.each(b,function(a){x=a.x-xe;y=a.y-ye;z=a.z||0;p={x:c1*x-g*z,y:-g*s2*x-c1*s2*z+c2*y,z:g*c2*x+c1*c2*z+s2*y};p.x=p.x*((ze-p.z)/ze)+xe;p.y=p.y*((ze-p.z)/ze)+ye;f.push({x:round(p.x),y:round(p.y),z:round(p.z)})});return f}var q=(4*(Math.sqrt(2)-1)/3)/(o/2);function curveTo(a,b,c,d,e,f,g,h){var i=[];if((f>e)&&(f-e>o/2+0.0001)){i=i.concat(curveTo(a,b,c,d,e,e+(o/2),g,h));i=i.concat(curveTo(a,b,c,d,e+(o/2),f,g,h));return i}else if((f<e)&&(e-f>o/2+0.0001)){i=i.concat(curveTo(a,b,c,d,e,e-(o/2),g,h));i=i.concat(curveTo(a,b,c,d,e-(o/2),f,g,h));return i}else{var j=f-e;return['C',a+(c*cos(e))-((c*q*j)*sin(e))+g,b+(d*sin(e))+((d*q*j)*cos(e))+h,a+(c*cos(f))+((c*q*j)*sin(f))+g,b+(d*sin(f))-((d*q*j)*cos(f))+h,a+(c*cos(f))+g,b+(d*sin(f))+h]}}n.SVGRenderer.prototype.toLinePath=function(b,c){var d=[];n.each(b,function(a){d.push('L',a.x,a.y)});d[0]='M';if(c){d.push('Z')}return d};n.SVGRenderer.prototype.cuboid=function(e){var f=this.g(),paths=this.cuboidPath(e);f.front=this.path(paths[0]).attr({zIndex:paths[3],'stroke-linejoin':'round'}).add(f);f.top=this.path(paths[1]).attr({zIndex:paths[4],'stroke-linejoin':'round'}).add(f);f.side=this.path(paths[2]).attr({zIndex:paths[5],'stroke-linejoin':'round'}).add(f);f.fillSetter=function(a){var b=a,c1=n.Color(a).brighten(0.1).get(),c2=n.Color(a).brighten(-0.1).get();this.front.attr({fill:b});this.top.attr({fill:c1});this.side.attr({fill:c2});this.color=a;return this};f.opacitySetter=function(a){this.front.attr({opacity:a});this.top.attr({opacity:a});this.side.attr({opacity:a});return this};f.attr=function(a){if(a.shapeArgs||a.x){var b=a.shapeArgs||a;var c=this.renderer.cuboidPath(b);this.front.attr({d:c[0],zIndex:c[3]});this.top.attr({d:c[1],zIndex:c[4]});this.side.attr({d:c[2],zIndex:c[5]})}else{n.SVGElement.prototype.attr.call(this,a)}return this};f.animate=function(a,b,c){if(a.x&&a.y){var d=this.renderer.cuboidPath(a);this.front.attr({zIndex:d[3]}).animate({d:d[0]},b,c);this.top.attr({zIndex:d[4]}).animate({d:d[1]},b,c);this.side.attr({zIndex:d[5]}).animate({d:d[2]},b,c)}else if(a.opacity){this.front.animate(a,b,c);this.top.animate(a,b,c);this.side.animate(a,b,c)}else{n.SVGElement.prototype.animate.call(this,a,b,c)}return this};f.destroy=function(){this.front.destroy();this.top.destroy();this.side.destroy();return null};f.attr({zIndex:-paths[3]});return f};n.SVGRenderer.prototype.cuboidPath=function(a){var x=a.x,y=a.y,z=a.z,h=a.height,w=a.width,d=a.depth,alpha=a.alpha,beta=a.beta,origin=a.origin;var b=[{x:x,y:y,z:z},{x:x+w,y:y,z:z},{x:x+w,y:y+h,z:z},{x:x,y:y+h,z:z},{x:x,y:y+h,z:z+d},{x:x+w,y:y+h,z:z+d},{x:x+w,y:y,z:z+d},{x:x,y:y,z:z+d}];b=perspective(b,alpha,beta,origin);var c,path2,path3;c=['M',b[0].x,b[0].y,'L',b[1].x,b[1].y,'L',b[2].x,b[2].y,'L',b[3].x,b[3].y,'Z'];var e=(b[0].z+b[1].z+b[2].z+b[3].z)/4;var f=['M',b[0].x,b[0].y,'L',b[7].x,b[7].y,'L',b[6].x,b[6].y,'L',b[1].x,b[1].y,'Z'];var g=['M',b[3].x,b[3].y,'L',b[2].x,b[2].y,'L',b[5].x,b[5].y,'L',b[4].x,b[4].y,'Z'];if(b[7].y<b[1].y){path2=f}else if(b[4].y>b[2].y){path2=g}else{path2=[]}var i=(beta>0?(b[0].z+b[7].z+b[6].z+b[1].z)/4:(b[3].z+b[2].z+b[5].z+b[4].z)/4);var j=['M',b[1].x,b[1].y,'L',b[2].x,b[2].y,'L',b[5].x,b[5].y,'L',b[6].x,b[6].y,'Z'];var k=['M',b[0].x,b[0].y,'L',b[7].x,b[7].y,'L',b[4].x,b[4].y,'L',b[3].x,b[3].y,'Z'];if(b[6].x>b[1].x){path3=j}else if(b[7].x<b[0].x){path3=k}else{path3=[]}var l=(alpha>0?(b[1].z+b[2].z+b[5].z+b[6].z)/4:(b[0].z+b[7].z+b[4].z+b[3].z)/4);return[c,path2,path3,e,i,l]};n.SVGRenderer.prototype.arc3d=function(f){f.alpha*=deg2rad;f.beta*=deg2rad;var g=this.g(),paths=this.arc3dPath(f),renderer=g.renderer;var h=paths.zTop*100;g.shapeArgs=f;g.top=renderer.path(paths.top).attr({zIndex:paths.zTop}).add(g);g.side1=renderer.path(paths.side2).attr({zIndex:paths.zSide2});g.side2=renderer.path(paths.side1).attr({zIndex:paths.zSide1});g.inn=renderer.path(paths.inn).attr({zIndex:paths.zInn});g.out=renderer.path(paths.out).attr({zIndex:paths.zOut});g.fillSetter=function(a){this.color=a;var b=a,c2=n.Color(a).brighten(-0.1).get();this.side1.attr({fill:c2});this.side2.attr({fill:c2});this.inn.attr({fill:c2});this.out.attr({fill:c2});this.top.attr({fill:b});return this};g.translateXSetter=function(a){this.out.attr({translateX:a});this.inn.attr({translateX:a});this.side1.attr({translateX:a});this.side2.attr({translateX:a});this.top.attr({translateX:a})};g.translateYSetter=function(a){this.out.attr({translateY:a});this.inn.attr({translateY:a});this.side1.attr({translateY:a});this.side2.attr({translateY:a});this.top.attr({translateY:a})};g.animate=function(c,d,e){if(c.end||c.start){this._shapeArgs=this.shapeArgs;n.SVGElement.prototype.animate.call(this,{_args:c},{duration:d,step:function(){var a=arguments,fx=a[1],g=fx.elem,start=g._shapeArgs,end=fx.end,pos=fx.pos,sA=n.merge(start,{start:start.start+((end.start-start.start)*pos),end:start.end+((end.end-start.end)*pos)});var b=g.renderer.arc3dPath(sA);g.shapeArgs=sA;g.top.attr({d:b.top,zIndex:b.zTop});g.inn.attr({d:b.inn,zIndex:b.zInn});g.out.attr({d:b.out,zIndex:b.zOut});g.side1.attr({d:b.side1,zIndex:b.zSide1});g.side2.attr({d:b.side2,zIndex:b.zSide2})}},e)}else{n.SVGElement.prototype.animate.call(this,c,d,e)}return this};g.destroy=function(){this.top.destroy();this.out.destroy();this.inn.destroy();this.side1.destroy();this.side2.destroy();n.SVGElement.prototype.destroy.call(this)};g.hide=function(){this.top.hide();this.out.hide();this.inn.hide();this.side1.hide();this.side2.hide()};g.show=function(){this.top.show();this.out.show();this.inn.show();this.side1.show();this.side2.show()};g.zIndex=h;g.attr({zIndex:h});return g};n.SVGRenderer.prototype.arc3dPath=function(c){var e=c.x,cy=c.y,start=c.start,end=c.end-0.00001,r=c.r,ir=c.innerR,d=c.depth,alpha=c.alpha,beta=c.beta;var f=cos(start),ss=sin(start),ce=cos(end),se=sin(end),rx=r*cos(beta),ry=r*cos(alpha),irx=ir*cos(beta),iry=ir*cos(alpha),dx=d*sin(beta),dy=d*sin(alpha);var g=['M',e+(rx*f),cy+(ry*ss)];g=g.concat(curveTo(e,cy,rx,ry,start,end,0,0));g=g.concat(['L',e+(irx*ce),cy+(iry*se)]);g=g.concat(curveTo(e,cy,irx,iry,end,start,0,0));g=g.concat(['Z']);var b=(beta>0?o/2:0),a=(alpha>0?0:o/2);var h=start>-b?start:(end>-b?-b:start),end2=end<o-a?end:(start<o-a?o-a:end);var i=['M',e+(rx*cos(h)),cy+(ry*sin(h))];i=i.concat(curveTo(e,cy,rx,ry,h,end2,0,0));i=i.concat(['L',e+(rx*cos(end2))+dx,cy+(ry*sin(end2))+dy]);i=i.concat(curveTo(e,cy,rx,ry,end2,h,dx,dy));i=i.concat(['Z']);var j=['M',e+(irx*f),cy+(iry*ss)];j=j.concat(curveTo(e,cy,irx,iry,start,end,0,0));j=j.concat(['L',e+(irx*cos(end))+dx,cy+(iry*sin(end))+dy]);j=j.concat(curveTo(e,cy,irx,iry,end,start,dx,dy));j=j.concat(['Z']);var k=['M',e+(rx*f),cy+(ry*ss),'L',e+(rx*f)+dx,cy+(ry*ss)+dy,'L',e+(irx*f)+dx,cy+(iry*ss)+dy,'L',e+(irx*f),cy+(iry*ss),'Z'];var l=['M',e+(rx*ce),cy+(ry*se),'L',e+(rx*ce)+dx,cy+(ry*se)+dy,'L',e+(irx*ce)+dx,cy+(iry*se)+dy,'L',e+(irx*ce),cy+(iry*se),'Z'];var m=sin((start+end)/2),a2=sin(start),a3=sin(end);return{top:g,zTop:r,out:i,zOut:Math.max(m,a2,a3)*r,inn:j,zInn:Math.max(m,a2,a3)*r,side1:k,zSide1:a2*(r*0.99),side2:l,zSide2:a3*(r*0.99)}};n.Chart.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled};n.wrap(n.Chart.prototype,'isInsidePlot',function(a){if(this.is3d()){return true}else{return a.apply(this,[].slice.call(arguments,1))}});var s=n.getOptions();s.chart.options3d={enabled:false,alpha:0,beta:0,depth:100,viewDistance:25,frame:{bottom:{size:1,color:'rgba(255,255,255,0)'},side:{size:1,color:'rgba(255,255,255,0)'},back:{size:1,color:'rgba(255,255,255,0)'}}};s.plotOptions.pie.borderColor=undefined;n.wrap(n.Chart.prototype,'setChartSize',function(a){a.apply(this,[].slice.call(arguments,1));if(this.is3d()){var b=this.inverted,clipBox=this.clipBox,margin=this.margin,x=b?'y':'x',y=b?'x':'y',w=b?'height':'width',h=b?'width':'height';clipBox[x]=-(margin[3]||0);clipBox[y]=-(margin[0]||0);clipBox[w]=this.chartWidth+(margin[3]||0)+(margin[1]||0);clipBox[h]=this.chartHeight+(margin[0]||0)+(margin[2]||0)}});n.wrap(n.Chart.prototype,'redraw',function(a){if(this.is3d()){this.isDirtyBox=true}a.apply(this,[].slice.call(arguments,1))});n.Chart.prototype.retrieveStacks=function(a,b){var c={},i=1;if(a||!b){return this.series}n.each(this.series,function(S){if(!c[S.options.stack||0]){c[S.options.stack||0]={series:[S],position:i};i++}else{c[S.options.stack||0].series.push(S)}});c.totalStacks=i+1;return c};n.wrap(n.Axis.prototype,'init',function(a){var b=arguments;if(b[1].is3d()){b[2].tickWidth=n.pick(b[2].tickWidth,0);b[2].gridLineWidth=n.pick(b[2].gridLineWidth,1)}a.apply(this,[].slice.call(arguments,1))});n.wrap(n.Axis.prototype,'render',function(a){a.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()){return}var b=this.chart,renderer=b.renderer,options3d=b.options.chart.options3d,alpha=options3d.alpha,beta=options3d.beta*(b.yAxis[0].opposite?-1:1),frame=options3d.frame,fbottom=frame.bottom,fback=frame.back,fside=frame.side,depth=options3d.depth,height=this.height,width=this.width,left=this.left,top=this.top;var c={x:b.plotLeft+(b.plotWidth/2),y:b.plotTop+(b.plotHeight/2),z:depth,vd:options3d.viewDistance};if(this.horiz){if(this.axisLine){this.axisLine.hide()}var d={x:left,y:top+(b.yAxis[0].reversed?-fbottom.size:height),z:0,width:width,height:fbottom.size,depth:depth,alpha:alpha,beta:beta,origin:c};if(!this.bottomFrame){this.bottomFrame=renderer.cuboid(d).attr({fill:fbottom.color,zIndex:(b.yAxis[0].reversed&&alpha>0?4:-1)}).css({stroke:fbottom.color}).add()}else{this.bottomFrame.animate(d)}}else{var e={x:left,y:top,z:depth+1,width:width,height:height+fbottom.size,depth:fback.size,alpha:alpha,beta:beta,origin:c};if(!this.backFrame){this.backFrame=renderer.cuboid(e).attr({fill:fback.color,zIndex:-3}).css({stroke:fback.color}).add()}else{this.backFrame.animate(e)}if(this.axisLine){this.axisLine.hide()}var f={x:(b.yAxis[0].opposite?width:0)+left-fside.size,y:top,z:0,width:fside.size,height:height+fbottom.size,depth:depth+fback.size,alpha:alpha,beta:beta,origin:c};if(!this.sideFrame){this.sideFrame=renderer.cuboid(f).attr({fill:fside.color,zIndex:-2}).css({stroke:fside.color}).add()}else{this.sideFrame.animate(f)}}});n.wrap(n.Axis.prototype,'getPlotLinePath',function(a){var b=a.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()){return b}if(b===null){return b}var c=this.chart,options3d=c.options.chart.options3d;var d=options3d.depth;options3d.origin={x:c.plotLeft+(c.plotWidth/2),y:c.plotTop+(c.plotHeight/2),z:d,vd:options3d.viewDistance};var e=[{x:b[1],y:b[2],z:(this.horiz||this.opposite?d:0)},{x:b[1],y:b[2],z:d},{x:b[4],y:b[5],z:d},{x:b[4],y:b[5],z:(this.horiz||this.opposite?0:d)}];var f=c.options.inverted?options3d.beta:options3d.alpha,beta=c.options.inverted?options3d.alpha:options3d.beta;beta*=(c.yAxis[0].opposite?-1:1);e=perspective(e,f,beta,options3d.origin);b=this.chart.renderer.toLinePath(e,false);return b});n.wrap(n.Axis.prototype,'getPlotBandPath',function(a){if(!this.chart.is3d()){return a.apply(this,[].slice.call(arguments,1))}else{var b=arguments,from=b[1],to=b[2];var c=this.getPlotLinePath(to),path=this.getPlotLinePath(from);if(path&&c){path.push(c[7],c[8],c[4],c[5],c[1],c[2])}else{path=null}return path}});n.wrap(n.Tick.prototype,'getMarkPath',function(a){var b=a.apply(this,[].slice.call(arguments,1));if(!this.axis.chart.is3d()){return b}var c=this.axis.chart,options3d=c.options.chart.options3d;var d={x:c.plotLeft+(c.plotWidth/2),y:c.plotTop+(c.plotHeight/2),z:options3d.depth,vd:options3d.viewDistance};var e=[{x:b[1],y:b[2],z:0},{x:b[4],y:b[5],z:0}];var f=c.inverted?options3d.beta:options3d.alpha,beta=c.inverted?options3d.alpha:options3d.beta;beta*=(c.yAxis[0].opposite?-1:1);e=perspective(e,f,beta,d);b=['M',e[0].x,e[0].y,'L',e[1].x,e[1].y];return b});n.wrap(n.Tick.prototype,'getLabelPosition',function(a){var b=a.apply(this,[].slice.call(arguments,1));if(!this.axis.chart.is3d()){return b}var c=this.axis.chart,options3d=c.options.chart.options3d;var d={x:c.plotLeft+(c.plotWidth/2),y:c.plotTop+(c.plotHeight/2),z:options3d.depth,vd:options3d.viewDistance};var e=c.inverted?options3d.beta:options3d.alpha,beta=c.inverted?options3d.alpha:options3d.beta;beta*=(c.yAxis[0].opposite?-1:1);b=perspective([{x:b.x,y:b.y,z:0}],e,beta,d)[0];return b});n.wrap(n.Axis.prototype,'drawCrosshair',function(a){var b=arguments;if(this.chart.is3d()){if(b[2]){b[2]={plotX:b[2].plotXold||b[2].plotX,plotY:b[2].plotYold||b[2].plotY}}}a.apply(this,[].slice.call(b,1))});n.wrap(n.seriesTypes.column.prototype,'translate',function(c){c.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()){return}var d=this,chart=d.chart,options=chart.options,seriesOptions=d.options,options3d=options.chart.options3d,depth=seriesOptions.depth||25,origin={x:chart.plotWidth/2,y:chart.plotHeight/2,z:options3d.depth,vd:options3d.viewDistance},alpha=options3d.alpha,beta=options3d.beta*(chart.yAxis[0].opposite?-1:1);var e=seriesOptions.stacking?(seriesOptions.stack||0):d._i;var z=e*(depth+(seriesOptions.groupZPadding||1));if(seriesOptions.grouping!==false){z=0}z+=(seriesOptions.groupZPadding||1);n.each(d.data,function(a){var b=a.shapeArgs,tooltipPos=a.tooltipPos;a.shapeType='cuboid';b.alpha=alpha;b.beta=beta;b.z=z;b.origin=origin;b.depth=depth;tooltipPos=perspective([{x:tooltipPos[0],y:tooltipPos[1],z:z}],alpha,beta,origin)[0];a.tooltipPos=[tooltipPos.x,tooltipPos.y]})});n.wrap(n.seriesTypes.column.prototype,'animate',function(b){if(!this.chart.is3d()){b.apply(this,[].slice.call(arguments,1))}else{var c=arguments,init=c[1],yAxis=this.yAxis,series=this,reversed=this.yAxis.reversed;if(n.svg){if(init){n.each(series.data,function(a){a.height=a.shapeArgs.height;a.shapey=a.shapeArgs.y;a.shapeArgs.height=1;if(!reversed){if(a.stackY){a.shapeArgs.y=a.plotY+yAxis.translate(a.stackY)}else{a.shapeArgs.y=a.plotY+(a.negative?-a.height:a.height)}}})}else{n.each(series.data,function(a){a.shapeArgs.height=a.height;a.shapeArgs.y=a.shapey;if(a.graphic){a.graphic.animate(a.shapeArgs,series.options.animation)}});this.drawDataLabels();series.animate=null}}}});n.wrap(n.seriesTypes.column.prototype,'init',function(a){a.apply(this,[].slice.call(arguments,1));if(this.chart.is3d()){var b=this.options,grouping=b.grouping,stacking=b.stacking,z=0;if(!(grouping!==undefined&&!grouping)&&stacking){var c=this.chart.retrieveStacks(grouping,stacking),stack=b.stack||0,i;for(i=0;i<c[stack].series.length;i++){if(c[stack].series[i]===this){break}}z=(c.totalStacks*10)-(10*(c.totalStacks-c[stack].position))-i}b.zIndex=z}});function draw3DPoints(c){if(this.chart.is3d()){var d=this.chart.options.plotOptions.column.grouping;if(d!==undefined&&!d&&this.group.zIndex!==undefined){this.group.attr({zIndex:(this.group.zIndex*10)})}var e=this.options,states=this.options.states;this.borderWidth=e.borderWidth=e.edgeWidth||1;n.each(this.data,function(a){var b=a.pointAttr;this.borderColor=n.pick(e.edgeColor,b[''].fill);b[''].stroke=this.borderColor;b.hover.stroke=n.pick(states.hover.edgeColor,this.borderColor);b.select.stroke=n.pick(states.select.edgeColor,this.borderColor)})}c.apply(this,[].slice.call(arguments,1))}n.wrap(n.Series.prototype,'alignDataLabel',function(a){if(this.chart.is3d()&&(this.type==='column'||this.type==='columnrange')){var b=this,chart=b.chart,options=chart.options,options3d=options.chart.options3d,origin={x:chart.plotWidth/2,y:chart.plotHeight/2,z:options3d.depth,vd:options3d.viewDistance},alpha=options3d.alpha,beta=options3d.beta*(chart.yAxis[0].opposite?-1:1);var c=arguments,alignTo=c[4];var d=({x:alignTo.x,y:alignTo.y,z:0});d=perspective([d],alpha,beta,origin)[0];alignTo.x=d.x;alignTo.y=d.y}a.apply(this,[].slice.call(arguments,1))});if(n.seriesTypes.columnrange){n.wrap(n.seriesTypes.columnrange.prototype,'drawPoints',draw3DPoints)}n.wrap(n.seriesTypes.column.prototype,'drawPoints',draw3DPoints);var t=n.getOptions();t.plotOptions.cylinder=n.merge(t.plotOptions.column);var u=n.extendClass(n.seriesTypes.column,{type:'cylinder'});n.seriesTypes.cylinder=u;n.wrap(n.seriesTypes.cylinder.prototype,'translate',function(c){c.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()){return}var d=this,chart=d.chart,options=chart.options,cylOptions=options.plotOptions.cylinder,options3d=options.chart.options3d,depth=cylOptions.depth||0,origin={x:chart.inverted?chart.plotHeight/2:chart.plotWidth/2,y:chart.inverted?chart.plotWidth/2:chart.plotHeight/2,z:options3d.depth,vd:options3d.viewDistance},alpha=options3d.alpha;var z=cylOptions.stacking?(this.options.stack||0)*depth:d._i*depth;z+=depth/2;if(cylOptions.grouping!==false){z=0}n.each(d.data,function(a){var b=a.shapeArgs;a.shapeType='arc3d';b.x+=depth/2;b.z=z;b.start=0;b.end=2*o;b.r=depth*0.95;b.innerR=0;b.depth=b.height*(1/sin((90-alpha)*deg2rad))-z;b.alpha=90-alpha;b.beta=0;b.origin=origin})});n.wrap(n.seriesTypes.pie.prototype,'translate',function(d){d.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()){return}var e=this,chart=e.chart,options=chart.options,seriesOptions=e.options,depth=seriesOptions.depth||0,options3d=options.chart.options3d,origin={x:chart.plotWidth/2,y:chart.plotHeight/2,z:options3d.depth},alpha=options3d.alpha,beta=options3d.beta;var z=seriesOptions.stacking?(seriesOptions.stack||0)*depth:e._i*depth;z+=depth/2;if(seriesOptions.grouping!==false){z=0}n.each(e.data,function(a){a.shapeType='arc3d';var b=a.shapeArgs;if(jQuery.isNumeric(a.y)){b.z=z;b.depth=depth*0.75;b.origin=origin;b.alpha=alpha;b.beta=beta;var c=(b.end+b.start)/2;a.slicedTranslation={translateX:round(cos(c)*e.options.slicedOffset*cos(alpha*deg2rad)),translateY:round(sin(c)*e.options.slicedOffset*cos(alpha*deg2rad))}}else{b=null}})});n.wrap(n.seriesTypes.pie.prototype.pointClass.prototype,'haloPath',function(a){return this.series.chart.is3d()?[]:a.call(this)});n.wrap(n.seriesTypes.pie.prototype,'drawPoints',function(c){if(this.chart.is3d()){var d=this.options,states=this.options.states;this.borderWidth=d.borderWidth=d.edgeWidth||1;states.hover.borderColor=n.pick(states.hover.edgeColor,this.borderColor);states.hover.borderWidth=n.pick(states.hover.edgeWidth,this.borderWidth);states.select.borderColor=n.pick(states.select.edgeColor,this.borderColor);states.select.borderWidth=n.pick(states.select.edgeWidth,this.borderWidth);n.each(this.data,function(a){var b=a.pointAttr;b[''].stroke=a.series.borderColor||a.color;b['']['stroke-width']=a.series.borderWidth;b.hover.stroke=states.hover.borderColor;b.hover['stroke-width']=states.hover.borderWidth;b.select.stroke=states.select.borderColor;b.select['stroke-width']=states.select.borderWidth})}c.apply(this,[].slice.call(arguments,1));if(this.chart.is3d()){var e=this.group;n.each(this.points,function(a){a.graphic.out.add(e);a.graphic.inn.add(e);a.graphic.side1.add(e);a.graphic.side2.add(e)})}});n.wrap(n.seriesTypes.pie.prototype,'drawDataLabels',function(c){if(this.chart.is3d()){var e=this;n.each(e.data,function(a){var b=a.shapeArgs,r=b.r,d=b.depth,a1=b.alpha*deg2rad,a2=(b.start+b.end)/2,labelPos=a.labelPos;labelPos[1]+=(-r*(1-cos(a1))*sin(a2))+(sin(a2)>0?sin(a1)*d:0);labelPos[3]+=(-r*(1-cos(a1))*sin(a2))+(sin(a2)>0?sin(a1)*d:0);labelPos[5]+=(-r*(1-cos(a1))*sin(a2))+(sin(a2)>0?sin(a1)*d:0)})}c.apply(this,[].slice.call(arguments,1))});n.wrap(n.seriesTypes.pie.prototype,'addPoint',function(a){a.apply(this,[].slice.call(arguments,1));if(this.chart.is3d()){this.update()}});n.wrap(n.seriesTypes.pie.prototype,'animate',function(a){if(!this.chart.is3d()){a.apply(this,[].slice.call(arguments,1))}else{var b=arguments,init=b[1],animation=this.options.animation,attribs,center=this.center,group=this.group,markerGroup=this.markerGroup;if(n.svg){if(animation===true){animation={}}if(init){group.oldtranslateX=group.translateX;group.oldtranslateY=group.translateY;attribs={translateX:center[0],translateY:center[1],scaleX:0.001,scaleY:0.001};group.attr(attribs);if(markerGroup){markerGroup.attrSetters=group.attrSetters;markerGroup.attr(attribs)}}else{attribs={translateX:group.oldtranslateX,translateY:group.oldtranslateY,scaleX:1,scaleY:1};group.animate(attribs,animation);if(markerGroup){markerGroup.animate(attribs,animation)}this.animate=null}}}});n.wrap(n.seriesTypes.scatter.prototype,'translate',function(c){c.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()){return}var d=this,chart=d.chart,options3d=d.chart.options.chart.options3d,alpha=options3d.alpha,beta=options3d.beta,origin={x:chart.inverted?chart.plotHeight/2:chart.plotWidth/2,y:chart.inverted?chart.plotWidth/2:chart.plotHeight/2,z:options3d.depth,vd:options3d.viewDistance},depth=options3d.depth,zAxis=chart.options.zAxis||{min:0,max:depth};var e=depth/(zAxis.max-zAxis.min);n.each(d.data,function(a){var b={x:a.plotX,y:a.plotY,z:(a.z-zAxis.min)*e};b=perspective([b],alpha,beta,origin)[0];a.plotXold=a.plotX;a.plotYold=a.plotY;a.plotX=b.x;a.plotY=b.y;a.plotZ=b.z})});n.wrap(n.seriesTypes.scatter.prototype,'init',function(a){var b=a.apply(this,[].slice.call(arguments,1));if(this.chart.is3d()){this.pointArrayMap=['x','y','z'];var c='x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>';if(this.userOptions.tooltip){this.tooltipOptions.pointFormat=this.userOptions.tooltip.pointFormat||c}else{this.tooltipOptions.pointFormat=c}}return b});if(n.VMLRenderer){n.setOptions({animate:false});n.VMLRenderer.prototype.cuboid=n.SVGRenderer.prototype.cuboid;n.VMLRenderer.prototype.cuboidPath=n.SVGRenderer.prototype.cuboidPath;n.VMLRenderer.prototype.toLinePath=n.SVGRenderer.prototype.toLinePath;n.VMLRenderer.prototype.createElement3D=n.SVGRenderer.prototype.createElement3D;n.VMLRenderer.prototype.arc3d=function(a){var b=n.SVGRenderer.prototype.arc3d.call(this,a);b.css({zIndex:b.zIndex});return b};n.VMLRenderer.prototype.arc3dPath=n.SVGRenderer.prototype.arc3dPath;n.Chart.prototype.renderSeries=function(){var a,i=this.series.length;while(i--){a=this.series[i];a.translate();if(a.setTooltipPoints){a.setTooltipPoints()}a.render()}};n.wrap(n.Axis.prototype,'render',function(a){a.apply(this,[].slice.call(arguments,1));if(this.sideFrame){this.sideFrame.css({zIndex:0});this.sideFrame.front.attr({fill:this.sideFrame.color})}if(this.bottomFrame){this.bottomFrame.css({zIndex:1});this.bottomFrame.front.attr({fill:this.bottomFrame.color})}if(this.backFrame){this.backFrame.css({zIndex:0});this.backFrame.front.attr({fill:this.backFrame.color})}})}}(Highcharts));